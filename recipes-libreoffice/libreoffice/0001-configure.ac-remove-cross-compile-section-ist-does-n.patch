From eaa50b6596a4d15750eff5f7e2fe82df49900959 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Sun, 14 Jul 2013 23:59:08 +0200
Subject: [PATCH] configure.ac: remove cross-compile section - ist does not
 work for oe-environment
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Upstream-Status: Inappropriate [configuration specific]

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 configure.ac |  100 ----------------------------------------------------------
 1 files changed, 0 insertions(+), 100 deletions(-)

diff --git a/configure.ac b/configure.ac
index 50368f7..0818adf 100644
--- a/configure.ac
+++ b/configure.ac
@@ -4080,112 +4080,12 @@ dnl machine when doing cross-compilation
 dnl ===================================================================
 
 m4_pattern_allow([PKG_CONFIG_FOR_BUILD])
-if test "$cross_compiling" = "yes"; then
-    AC_MSG_CHECKING([for BUILD platform configuration])
-    echo
-    rm -rf CONF-FOR-BUILD config_build.mk
-    mkdir CONF-FOR-BUILD
-    (cd $SRC_ROOT && tar cf - \
-        config.guess \
-        config_host.mk.in \
-        Makefile.in \
-        lo.xcent.in \
-        config_host/*.in \
-        bin/get_config_variables \
-        solenv/bin/getcompver.awk \
-        solenv/inc/langlist.mk \
-        instsetoo_native/util/openoffice.lst.in) \
-    | (cd CONF-FOR-BUILD && tar xf -)
-    cp configure CONF-FOR-BUILD
-    test -d config_build && cp -p config_build/*.h CONF-FOR-BUILD/config_host
-    (
-    unset COM GUI GUIBASE OS CPU CPUNAME
-    unset CC CXX SYSBASE CFLAGS
-    unset AR NM OBJDUMP PKG_CONFIG RANLIB STRIP
-    unset CPPUNIT_CFLAGS CPPUNIT_LIBS
-    unset LIBXML_CFLAGS LIBXML_LIBS LIBXSLT_CFLAGS LIBXSLT_LIBS XSLTPROC
-    test -n "$CC_FOR_BUILD" && export CC="$CC_FOR_BUILD"
-    test -n "$CXX_FOR_BUILD" && export CXX="$CXX_FOR_BUILD"
-    test -n "$PKG_CONFIG_FOR_BUILD" && export PKG_CONFIG="$PKG_CONFIG_FOR_BUILD"
-    cd CONF-FOR-BUILD
-    sub_conf_opts=""
-    test -n "$enable_ccache" && sub_conf_opts="$sub_conf_opts --enable-ccache=$enable_ccache"
-    test -n "$with_ant_home" && sub_conf_opts="$sub_conf_opts --with-ant-home=$with_ant_home"
-    test $with_junit = no && sub_conf_opts="$sub_conf_opts --without-junit"
-    test -n "$TARFILE_LOCATION" && sub_conf_opts="$sub_conf_opts --with-external-tar=$TARFILE_LOCATION"
-    test -n "${with_solver_and_workdir_root}" && sub_conf_opts="$sub_conf_opts --with-solver-and-workdir-root=${with_solver_and_workdir_root}"
-    test -n "$with_system_boost_for_build" && sub_conf_opts="$sub_conf_opts --with-system-boost"
-    test -n "$with_system_cppunit_for_build" && sub_conf_opts="$sub_conf_opts --with-system-cppunit"
-    test -n "$with_system_expat_for_build" && sub_conf_opts="$sub_conf_opts --with-system-expat"
-    test "$with_system_icu_for_build" = "yes" -o "$with_system_icu_for_build" = "force" && sub_conf_opts="$sub_conf_opts --with-system-icu"
-    test -n "$with_system_libxml_for_build" && sub_conf_opts="$sub_conf_opts --with-system-libxml"
-    # we need the msi build tools on mingw if we are creating the
-    # installation set
-    if test "$WITH_MINGW" = "yes"; then
-        enable_winegcc_for_build=
-        for pkgformat in $PKGFORMAT; do
-            case "$pkgformat" in
-                msi|native) enable_winegcc_for_build=yes ;;
-            esac
-        done
-        test -n "$enable_winegcc_for_build" && sub_conf_opts="$sub_conf_opts --enable-winegcc"
-    fi
-    sub_conf_opts="$sub_conf_opts $with_build_platform_configure_options"
-    # Don't bother having configure look for stuff not needed for the build platform anyway
-    ./configure \
-        --disable-graphite \
-        --disable-postgresql-sdbc \
-        --with-parallelism="$with_parallelism" \
-        --without-doxygen \
-        --without-java \
-        ENABLE_PDFIMPORT=FALSE \
-        $sub_conf_opts \
-        --srcdir=$srcdir \
-        2>&1 | sed -e 's/^/    /'
-    test -f ./config_host.mk 2>/dev/null || exit
-    cp config_host.mk ../config_build.mk
-    mv config.log ../config.Build.log
-    mkdir -p ../config_build
-    mv config_host/*.h ../config_build
-    . ./bin/get_config_variables OS PATH CC CXX INPATH SYSTEM_LIBXSLT OUTDIR WORKDIR
-
-    for V in OS CC CXX INPATH SYSTEM_LIBXSLT; do
-        VV='$'$V
-        VV=`eval "echo $VV"`
-        if test -n "$VV"; then
-            line=${V}_FOR_BUILD='${'${V}_FOR_BUILD:-$VV'}'
-            echo "$line" >>build-config
-        fi
-    done
-
-    for V in OUTDIR WORKDIR; do
-        VV='$'$V
-        VV=`eval "echo $VV"`
-        VV=`echo $VV | sed -e 's,/CONF-FOR-BUILD,,g'`
-        if test -n "$VV"; then
-            line="${V}_FOR_BUILD='$VV'"
-            echo "$line" >>build-config
-        fi
-    done
-
-    line=`echo "LO_PATH_FOR_BUILD=$PATH" | sed -e 's,/CONF-FOR-BUILD,,g'`
-    echo "$line" >>build-config
-
-    )
-    test -f CONF-FOR-BUILD/build-config || AC_MSG_ERROR([Running configure script for BUILD system failed, see CONF-FOR-BUILD/config.log])
-    test -f config_build.mk || AC_MSG_ERROR([A file called config_build.mk was supposed to have been copied here, but it isn't found])
-    perl -pi -e 's,/CONF-FOR-BUILD,,g' config_build.mk
-    eval `cat CONF-FOR-BUILD/build-config`
-    AC_MSG_RESULT([checking for BUILD platform configuration... done])
-    rm -rf CONF-FOR-BUILD
-else
     OS_FOR_BUILD="$OS"
     CC_FOR_BUILD="$CC"
     CXX_FOR_BUILD="$CXX"
     INPATH_FOR_BUILD="$INPATH"
     OUTDIR_FOR_BUILD="$OUTDIR"
     WORKDIR_FOR_BUILD="$WORKDIR"
-fi
 AC_SUBST(OS_FOR_BUILD)
 AC_SUBST(INPATH_FOR_BUILD)
 AC_SUBST(OUTDIR_FOR_BUILD)
-- 
1.7.4.4

